@page  "/AnnualLeave/Details/{AnnualLeaveRequestID:int}"

@using AnnualLeaveRequest.Data
@using AnnualLeaveRequest.Models
@inject IAnnualLeaveRequestService AnnualLeaveRequestService
@inject NavigationManager NavigationManager

<h2 class="esh-body-title">Details</h2>

<div class="container">
    <div class="row">
        <dl class="col-md-6 dl-horizontal">
            <dt>
                Start Date
            </dt>

            <dd>
                @model.StartDate.ToString("dd-MMM-yyyy")
            </dd>

            <dt>
                Return Date
            </dt>

            <dd>
                @model.ReturnDate.ToString("dd-MMM-yyyy")
            </dd>

            <dt>
                Number of Days Requested
            </dt>

            <dd>
                @model.NumberOfDaysRequested
            </dd>

            <dt>
                Number of Annual Leave Days Requested
            </dt>

            <dd>
                @model.NumberOfAnnualLeaveDaysRequested
            </dd>

            <dt>
                Number of Public Leave Days Requested
            </dt>

            <dd>
                @model.NumberOfPublicLeaveDaysRequested
            </dd>

            <dt>
                Paid Leave Type
            </dt>

            <dd>
                @model.PaidLeaveType
            </dd>

            <dt>
                Leave Type
            </dt>

            <dd>
                @model.LeaveType
            </dd>

            <dt>
                Notes
            </dt>

            <dd>
                @model.Notes
            </dd>
        </dl>
    </div>

    <div class="form-actions no-color esh-link-list">
        @if (editableRequest)
        {
            <a href="@($"/AnnualLeave/Edit/{model.AnnualLeaveRequestID}")" class="esh-link-item">
                Edit
            </a>
            <label>|</label>
        }

        <a href="/AnnualLeave/Overview" class="esh-link-item">
            Back to Overview
        </a>
    </div>
</div>

@code {
    [Parameter]
    public int AnnualLeaveRequestID { get; set; }

    private AnnualLeaveRequestOverviewModel model = new AnnualLeaveRequestOverviewModel();
    protected bool editableRequest => model.Year >= DateTime.UtcNow.Year;


    protected override void OnInitialized()
    {
        model = AnnualLeaveRequestService.GetRequest(AnnualLeaveRequestID);
    }
}
